/**
 * angular-rome2rio - v0.0.1 - 2014-01-21
 *
 *
 * Copyright (c) 2014 Pulkit Karwal
 * Licensed MIT
 */

angular.module("angular-rome2rio",[]).provider("rome2rio",function(){"use strict";var a={};a.apiKey=null,a.apiServer="free.rome2rio.com",a.responseFormat="json",a.apiVersion="1.2",a.kind="street_address",a.currency="AUD",a.flags=null,this.setKey=function(b){a.apiKey=b},this.setServer=function(b){a.apiServer=b},this.setResponseFormat=function(b){a.responseFormat=b},this.setAPIVersion=function(b){a.apiVersion=b},this.setCurrency=function(b){a.currency=b},this.setDetailLevel=function(b){a.kind=b},this.setFlags=function(b){a.flags=b},this.$get=["$q","$http",function(b,c){function d(b,c,d,e,f,g,h,i){var j={};j.prefix="http://",j.server=a.apiServer,j.version=a.apiVersion,j.format=a.responseFormat,j.endPoint="Search",j.key=a.apiKey;var k=[];return b&&k.push("oName="+b),c&&k.push("dName="+c),d&&k.push("oPos="+d),e&&k.push("dPos="+e),f&&k.push("oKind="+f),g&&k.push("dKind="+g),h&&k.push("currency="+h),i&&k.push("flags="+i),j.prefix+j.server+"/api/"+j.version+"/"+j.format+"/"+j.endPoint+"?key="+j.key+"&"+k.join("&")}function e(e,f,h,i){var j=b.defer();return c.get(d(e,f,h,i,a.kind,a.kind,a.currency,a.flags)).success(function(b){if("json"===a.responseFormat){var c=b.routes;c?j.resolve(g(c)):j.reject("No routes available")}else j.resolve(b)}),j.promise}function f(a,b){return a+","+b}function g(a){var b=a[0].segments,c=0,d=[];return angular.forEach(b,function(a){c+=a.indicativePrice.price,d.push(a.path)}),{getCost:function(){return c},getPaths:function(){return d}}}return{search:e,rawRequestURL:d,toPosition:f}}]});
//# sourceMappingURL=angular-rome2rio.min.map