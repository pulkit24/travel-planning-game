/**
 * angular-rome2rio - v0.0.1 - 2014-01-29
 *
 *
 * Copyright (c) 2014 Pulkit Karwal
 * Licensed MIT
 */

angular.module("angular-rome2rio",[]).provider("rome2rio",function(){"use strict";var a={};a.apiKey=null,a.apiServer="free.rome2rio.com",a.responseFormat="json",a.apiVersion="1.2",a.kind="street_address",a.currency="AUD",a.flags=null,this.setKey=function(b){a.apiKey=b},this.setServer=function(b){a.apiServer=b},this.setResponseFormat=function(b){a.responseFormat=b},this.setAPIVersion=function(b){a.apiVersion=b},this.setCurrency=function(b){a.currency=b},this.setDetailLevel=function(b){a.kind=b},this.setFlags=function(b){a.flags=b},this.$get=["$q","$http",function(b,c){function d(b,c,d,e,f,g,h,i){var j={};j.prefix="http://",j.server=a.apiServer,j.version=a.apiVersion,j.format=a.responseFormat,j.endPoint="Search",j.key=a.apiKey;var k=[];return b&&k.push("oName="+b),c&&k.push("dName="+c),d&&k.push("oPos="+d),e&&k.push("dPos="+e),f&&k.push("oKind="+f),g&&k.push("dKind="+g),h&&k.push("currency="+h),i&&k.push("flags="+i),j.prefix+j.server+"/api/"+j.version+"/"+j.format+"/"+j.endPoint+"?key="+j.key+"&"+k.join("&")}function e(e,f,g,h){var i=b.defer();return c.get(d(e,f,g,h,a.kind,a.kind,a.currency,a.flags)).success(function(b){if("json"===a.responseFormat){var c=b.routes;c?i.resolve(c):i.reject("No routes available")}else i.resolve(b)}),i.promise}function f(a,b){return a+","+b}function g(a,b){if(!b){for(var c=0,d=a.length;d>c;c++)if(a[c].segments&&a[c].segments.length){b=c;break}b=0}var e=a[b].segments,f=[];return angular.forEach(e,function(a){angular.isNumber(a.indicativePrice.price)&&f.push(a.path)}),f}function h(a,b){if(b)return a[b].indicativePrice.price;for(var c=0,d=a.length;d>c;c++)if(a[c].indicativePrice.price)return a[c].indicativePrice.price;return null}return{search:e,rawRequestURL:d,toPosition:f,getPaths:g,getCost:h}}]});
//# sourceMappingURL=angular-rome2rio.min.map